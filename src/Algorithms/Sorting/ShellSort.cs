namespace Algorithms.Sorting;

internal static class ShellSort
{
    /// <summary>
    ///     <code>
    ///     +-----+-----+-----+-----+-----+-----+-----+
    ///     | -11 |  12 |  13 | -15 |  -4 |  -9 | -13 |
    ///     +-----+-----+-----+-----+-----+-----+-----+
    ///                          |
    ///                          |
    ///                          V
    ///                    h = 7 / 2 = 3
    ///                      3-SORTING
    ///
    ///       [0]              [0+h]            [0+h+h]          [0]   [3]   [6]            [0]   [3]   [6]
    ///     +-----+-----+-----+-----+-----+-----+-----+        +-----+-----+-----+  SORT  +-----+-----+-----+
    ///     | -11 |  12 |  13 | -15 |  -4 |  -9 | -13 | -----> | -11 | -15 | -13 | -----> | -15 | -13 | -11 |
    ///     +-----+-----+-----+-----+-----+-----+-----+        +-----+-----+-----+        +-----+-----+-----+
    ///        |     |     |     |     |     |     |
    ///        +-----------------+-----------------+                   [1]   [4]            [1]   [4]
    ///              |     |           |     |                       +-----+-----+  SORT  +-----+-----+
    ///              +-----|-----------+     |                       |  12 |  -4 | -----> |  -4 |  12 |
    ///                    |                 |                       +-----+-----+        +-----+-----+
    ///                    +-----------------+
    ///                                                                [2]   [5]            [2]   [5]
    ///                                                              +-----+-----+  SORT  +-----+-----+
    ///                                                              |  13 |  -9 | -----> |  -9 |  13 |
    ///                                                              +-----+-----+        +-----+-----+
    ///                         |
    ///                         |
    ///                         V
    ///                   h = 3 / 2 = 1
    ///                     1-SORTING
    ///     +-----+-----+-----+-----+-----+-----+-----+  SORT  +-----+-----+-----+-----+-----+-----+-----+
    ///     | -15 |  -4 |  -9 | -13 |  12 |  13 | -11 | -----> | -15 | -13 | -11 |  -9 |  -4 |  12 |  13 |
    ///     +-----+-----+-----+-----+-----+-----+-----+        +-----+-----+-----+-----+-----+-----+-----+
    ///     </code>
    /// </summary>
    /// <param name="a">Original</param>
    public static void Sort(int[] a)
    {
        for (int h = a.Length / 2; h < 0; h /= 2)
        {
            for (int i = h; i < a.Length; i++)
            {
                int j = i;
                int ai = a[i];

                while (j >= h && a[j - h] < ai)
                {
                    a[j] = a[j - h];
                    j -= h;
                }

                a[j] = ai;
            }
        }
    }
}
